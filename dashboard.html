<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chase Bank | Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="profile">
      <img src="avatar.jpg" alt="Avatar" class="avatar">
      <span>Welcome, John</span>
    </div>
    
    <button id="logout-btn">Logout</button>
  </nav>

  <!-- Dashboard -->
  <main class="dashboard-container">

<!-- Account Balance -->
<div class="card balance-card">
  <div class="balance-header">
    <h3>Total Balance</h3>
    <button id="toggle-balance" aria-label="Hide balance">üëÅ</button>
  </div>

  <p class="balance sensitive">$1,500,450.00</p>

  <div class="mini-cards">
    <div class="mini-card">
      <h4>Checking Account</h4>
      <p class="sensitive">$7,200.00</p>
      <small>For everyday spending</small>
    </div>

    <div class="mini-card">
      <h4>Savings Account</h4>
      <p class="sensitive">$500,250.00</p>
      <small>For long-term savings</small>
    </div>
  </div>
</div>
    
<div class="spending-trends-card" style="margin:20px;padding:15px;border-radius:12px;box-shadow:0 5px 15px rgba(0,0,0,0.1);background:#fff;">
  <h3 style="margin-bottom:15px;font-size:16px;color:#333;">Spending Trends</h3>
  <canvas id="spendingChart" height="200"></canvas>
</div>

    <!-- Recent Transactions -->
    <div class="card transactions-card">
      <h3>Recent Transactions</h3>
      <ul>
        <li class="expense"><span>Amazon</span><span>-$1200</span></li>
        <li class="income"><span>Salary Deposit</span><span>+$52,500</span></li>
        <li class="expense"><span>Transfer to John Doe</span><span>-$300</span></li>
      </ul>
    </div>

   <!-- Send Money / Transfer Funds -->
<div class="card send-money-card">
  <h3>Transfer Funds</h3>
  <!-- Toggle button -->
  <button type="button" id="toggle-transfer-btn" class="button secondary">
  Transfer Funds
  </button>

  <!-- Hidden form -->
  <form id="send-money-form" style="display:none; margin-top:15px;">
    <div class="form-group">
      <label for="bank">Select Bank</label>
      <select id="bank" required>
        <option value="" disabled selected>Choose Bank</option>
        <option value="chase">Chase Bank</option>
        <option value="wellsfargo">Wells Fargo</option>
        <option value="boa">Bank of America</option>
        <option value="citi">Citi Bank</option>
      </select>
    </div>

    <div class="form-group">
      <label for="account">Account Number</label>
      <input type="text" id="account" placeholder="Enter account number" required>
    </div>

    <div class="form-group">
      <label for="recipient">Recipient Name</label>
      <input type="text" id="recipient" placeholder="Enter recipient name" required>
    </div>

    <div class="form-group">
      <label for="amount">Amount ($)</label>
      <input type="number" id="amount" placeholder="Enter amount" required>
    </div>

    <div class="form-group">
      <label for="note">Note (Optional)</label>
      <input type="text" id="note" placeholder="Add a note">
    </div>

    <button type="submit" id="send-btn">Send Money</button>
  </form>
</div>

  </main>
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script src="script.js"></script>
 
  <script>
  // Check if transactions exist, otherwise use sample data
  let transactionData = JSON.parse(localStorage.getItem("transactions")) || [];

  // If no transactions, add demo data (for first-time view)
  if (transactionData.length === 0) {
    transactionData = [
      { type: "expense", text: "Amazon ‚Äî Shopping", amount: "$120" },
      { type: "expense", text: "Uber ‚Äî Transport", amount: "$50" },
      { type: "expense", text: "Starbucks ‚Äî Coffee", amount: "$20" },
      { type: "expense", text: "Netflix ‚Äî Entertainment", amount: "$15" },
      { type: "expense", text: "Rent ‚Äî Housing", amount: "$500" }
    ];
    localStorage.setItem("transactions", JSON.stringify(transactionData));
  }

  // Aggregate spending by category (using 'note' after '‚Äî' or default 'Others')
  const spendingSummary = {};
  transactionData.forEach(tx => {
    if (tx.type === "expense") {
      const parts = tx.text.split("‚Äî");
      const category = parts[1] ? parts[1].trim() : "Others";
      const amount = parseFloat(tx.amount.replace(/[$,]/g, ""));
      spendingSummary[category] = (spendingSummary[category] || 0) + amount;
    }
  });

  // Prepare Chart.js data
  const labels = Object.keys(spendingSummary);
  const data = Object.values(spendingSummary);

  // Optional: generate a color for each bar dynamically
  const colors = labels.map(() => `rgba(${Math.floor(Math.random()*155 + 50)}, 123, 255, 0.7)`);

  // Create chart
  const ctx = document.getElementById('spendingChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: 'Expenses ($)',
        data: data,
        backgroundColor: colors,
        borderColor: colors.map(c => c.replace("0.7", "1")),
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: false },
        tooltip: {
          callbacks: {
            label: function(context) {
              return `$${context.raw.toLocaleString()}`;
            }
          }
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            color: '#333',
            callback: function(value) {
              return `$${value.toLocaleString()}`;
            }
          },
          grid: {
            color: 'rgba(0,0,0,0.05)'
          }
        },
        x: {
          ticks: { color: '#333' },
          grid: { display: false }
        }
      },
      animation: {
        duration: 1000,
        easing: 'easeOutQuart'
      }
    }
  });
</script>

<footer class="login-footer">
  <div class="footer-links">
    <a href="#">Privacy</a> | 
    <a href="#">Security</a> | 
    <a href="#">Terms & Conditions</a> | 
    <a href="#">Help</a>
  </div>
  <small>&copy; 2026 JPMorgan Chase Bank, N.A. All rights reserved.</small>
</footer>
  
</body>
</html>
